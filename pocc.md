# 第一章 计算机系统概论

## 计算机的硬件组成

### 计算机的功能部件

一个完整的计算机系统由硬件和软件两大系统组成
**硬件系统包括**

- 运算器
- 控制器
- 存储器
  -  主存储器
    也称内存储器，简称内存、主存，CPU能够直接访问
  - 辅助存储器
    也称外存储器，简称外存、辅存) CPU不能直接访问的大容量、速度较慢的存储器**
- 输入设备
- 输出设备

### 冯·诺伊曼计算机

**存储程序思想**

1. 计算机由输入设备、输出设备、运算器、存储器和控制器五大部件组成
2. 采用二进制形式表示数据和指令
3. 采用存储程序方式

冯诺依曼计算机以运算器为中心，现代计算机以存储器为中心

## 计算机的软件系统

基本的软件系统应包括系统软件与应用软件两大类

1. 系统软件
   - 保证计算机系统高效、正确运行的基础软件，通常作为系统资源提供给用户使用
2. 应用软件

对某一具体功能来说，可以用硬件实现，也可以用软件实现，这就是硬件、软件在逻辑功能上的等效

### 计算机系统的多级层次结构

<img src="./pocc.assets/image-20221107195005885.png" alt="image-20221107195005885" style="zoom:33%;" />

**第 0 级 硬件操作时序**
	实际的硬件层，是硬件组成的实体。 
**第 1 级  微程序机器层**
	实际的硬件层，它由机器硬件直接执行微指令。
**第 2 级  传统机器语言层**
	实际的硬件层，由微程序解释机器指令系统。
**第 3 级  操作系统层**
	由操作系统程序实现。操作系统程序是由机器指令和广义指令组成的。其中广义指令是为扩展机器功能而设置的，是由操作系统定义和解释的软件指令。这一层也称为混合层。
**第 4 级  汇编语言层**
	汇编语言是一种符号形式语言，用户借此可编写汇编语言源程序。这一层由汇编程序支持和执行。
**第 5 级  高级语言层**
	高级语言层为方便用户编写各类应用程序而设置的。它是面向用户的。该层由各种高级语言编译程序支持和执行。
**第 6 级  应用语言层**
	应用语言层是直接面向某个应用领域，为方便用户编写该应用领域的应用程序而设置的。由相应的应用软件包支持和执行。

第0、1、2级是实机器，上面几层均为虚机器（虚拟机）

### 计算机硬件系统的组织

#### 总线

现在普遍采用总线结构

**总线使用规定**

- 必须分时发送
- 可同时接收

**总线的分类**

1. 按照任务分类
   - CPU内部总线（芯片内总线）
     用于连接CPU内部各寄存器和算术逻辑部件
   - 部件内总线
     属于芯片间的总线    
   - 系统总线
   - 外总线
2. 按照信息传送方向分
   - 单项总线
   - 双向总线
3. 按照信息传送方向的位数分
   - 并行总线
   - 串行总线

**采用总线结构的好处**

- 可以大大减少系统中的信息传输线数，减轻发送部件的负载
- 可以简化硬件结构，灵活地修改与扩充系统

**总线的连接方式**

单总线结构

<img src="./pocc.assets/image-20221107195044617.png" alt="image-20221107195044617" style="zoom:33%;" />

- 优点
  - 控制简单，易于系统扩充
  - 将I/O与存储器同等对待，统一进行编址
- 缺点
  - 同一时间只能在一对设备之间传输信息，系统速度受到限制
  - 把主存与I/O设备同等对待，降低了主存的地位

**双总线结构**
在单总线的基础上，在CPU与主存之间增加了一组存储器总线，CPU访存直接通过存储器总线实现
采用以CPU为中心的存储器总线和I/O总线，分别进行数据传送

<img src="./pocc.assets/image-20221107195128635.png" alt="image-20221107195128635" style="zoom:33%;" />

提高了CPU的访存速度

**三总线结构**
在面向主存的双总线结构的基础上，增加I/O总线，使得CPU与主存、主存与I/O之间均具备独立的信息传输通路

<img src="./pocc.assets/image-20221107195144006.png" alt="image-20221107195144006" style="zoom:33%;" />

##### 通道

对于中型、大型计算机系统,由于I/O设备的增多使I/O处理成为又一个十分突出的问题。为此提出了“通道”的概念。

<img src="./pocc.assets/image-20221107195203714.png" alt="image-20221107195203714" style="zoom:33%;" />

## 计算机的性能指标

**基本字长**
基本字长是指参与运算的数的基本位数。
字长通常是硬件组织的基本单位，它决定着寄存器、ALU、数据总线的位数，因而直接影响着系统的硬件成本。

字长标志着计算机系统的**运算精度**

**主存容量**

主存储器所能存储的最大信息量称为主存容量。
CPU需要执行的程序和要处理的数据都存放在主存中。

**运算速度**

MIPS(每秒百万条指令) 
MFLOPS(每秒百万次浮点运算)。

MIPS的计算
<img src="./pocc.assets/image-20221107203606245.png" alt="image-20221107203606245" style="zoom:50%;" />



# 第二章 计算机中数据信息的表示

## 数制与数制转换

**数制转换原则**
整数部分、小数部分，分别进行转换

## 带符号数的表示

### 机器数与真值

1. 机器数
   在计算机中的二进制表示形式。机器数的数值部分和符号均用二进制代码表示
2. 真值
   机器数按一般表示方法所表示的数值

**机器数特点**

1. 最高位“0”代表正“+”，“1”代表负“-”
2. 小数点隐含在数据的某一固定位置上，不占用存储空间
3. 二进制位数与机器字长有关，超过机器字长的数值舍去

### 原码表示

保持原有的数值部分的形式不变，只将符号用二进制代码表示。
原码表示是最简单的机器数表示方法。

**纯小数源码定义**

<img src="./pocc.assets/image-20221113201705341.png" alt="image-20221113201705341" style="zoom:50%;" />

**纯整数原码定义**

<img src="./pocc.assets/image-20221113201817130.png" alt="image-20221113201817130" style="zoom:50%;" />

**原码的范围**

- 纯小数,n+1位原码的数据表示范围：
  -0.111…11～+0.111…11
  即$-(1-2^{-n}) ～ (1-2^{-n})$
- 纯整数,n+1位原码的数据表示范围：
  -111…11～+111…11
  $-(2^{n}-1) ～ (2^{n}-1)$

### 补码表示

**纯小数的补码定义**

<img src="./pocc.assets/image-20221113204704958.png" alt="image-20221113204704958" style="zoom:50%;" />

**纯整数的补码定义**

<img src="./pocc.assets/image-20221113204736793.png" alt="image-20221113204736793" style="zoom:50%;" />

**补码的范围**

纯小数  $-1～1-2^{-n}$  共$2^{n+1}$个数
纯整数  $-2^{-n}～2^{n-1}$   共$2^{n+1}$个数

**补码的模**

补码总是对确定的模而言的。如果补码运算结果超过了模，则模将自动丢失。

补码运算在运算过程中，模不能改变。

不同位数整数补码的模不同，不能将不同位数的补码直接进行运算。如需进行运算，需要进行符号扩展。

### 反码表示（了解）

反码实质上是补码的一个特例，其特别之处在于反码的模比补码的模小一个最低位上的 1

**纯小数反码的定义**

<img src="./pocc.assets/image-20221113210633733.png" alt="image-20221113210633733" style="zoom:50%;" />

**纯整数反码的定义** 

<img src="./pocc.assets/image-20221113210652545.png" alt="image-20221113210652545" style="zoom:50%;" />

### 移码表示

**纯小数移码**

$[x]_移=1+x,-1≤x<1$

**纯整数移码**

$[x]_移=2^n+x,-2^n≤x<2^n$

**移码与补码的关系**

补码——>移码
数值部分不变，符号取反。（反之亦然）即
$x≥0,[x]_移=[x]_补+2^n$
$x<0,[x]_移=[x]_补-2^n$

## 数的定点表示与浮点表示

任何一个数均可表示为：$(N)_R=S\times R^e$
$R$：基值。常用的有2、8、16等
$S$：尾数，代表数$N$的有效数字。计算机中一般表示为纯小数
$e$：阶码。代表$N$小数点的实际位置。一半小时为纯整数。

例：
$(123.45)_10=0.12345\times 10^3$
$(11011.101)_2=0.11011101\times 2^{+101}$

### 定点表示

是一种阶码$e$的取值固定不变的机器数表示
<u>机器确定后，$e$就确定了，不能更改，也不能两者并存</u>（两者是指什么？

**定点小数**

$e=0$，表示纯小数
<u>小数点在符号位最高数值位之间</u>

定点小数格式：

<img src="./pocc.assets/image-20221115204043625.png" alt="image-20221115204043625" style="zoom: 33%;" />

**定点整数**

$e=n$，表示纯整数
小数点在最低有效数值位之后

格式：

<img src="./pocc.assets/image-20221115204155623.png" alt="image-20221115204155623" style="zoom:33%;" />

**定点数的表示范围**

设数据为$N$，机器字长为$n+1$，其中$1$位符号位，$n$位数值位。

1. 原码表示
   二进制定点**小数**的表示范围为：
   $0≤|n|≤1-2^{-n}$
   二进制定点**整数**的表示范围为：
   $0≤|n|≤2^{-n}-1$

   |          | 机器数         | 真值          | 真值       |
   | -------- | -------------- | ------------- | ---------- |
   |          | 数符 尾数(n位) | 定点小数      | 定点整数   |
   | 最小正数 | 0 00 ... 01    | $+2^{-n}$     | +1         |
   | 最大正数 | 0 11 ... 11    | $1-2^{-n}$    | $2^n-1$    |
   | 最大负数 | 1 00 ... 01    | $-2^{-n}$     | $-1$       |
   | 最小负数 | 1 11 ... 11    | $-(1-2^{-n})$ | $-(2^n-1)$ |

2. 反码表示（了解）

3. 补码表示

